{
  "project": {
    "name": "InstantHPI",
    "description": "AI-Powered Telemedicine Platform", 
    "version": "1.0.0",
    "purpose": "A collaborative telemedicine platform leveraging advanced AI and intelligent workflow management to transform healthcare professional interactions"
  },
  "complete_source_code": {
    "package.json": {
      "name": "rest-express",
      "version": "1.0.0",
      "type": "module",
      "license": "MIT",
      "scripts": {
        "dev": "NODE_ENV=development tsx server/index.ts",
        "build": "vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist",
        "start": "NODE_ENV=production node dist/index.js",
        "check": "tsc",
        "db:push": "drizzle-kit push"
      },
      "dependencies": {
        "@anthropic-ai/sdk": "^0.37.0",
        "@dnd-kit/core": "^6.3.1",
        "@dnd-kit/modifiers": "^9.0.0",
        "@dnd-kit/sortable": "^10.0.0",
        "@dnd-kit/utilities": "^3.2.2",
        "@hookform/resolvers": "^3.10.0",
        "@jridgewell/trace-mapping": "^0.3.25",
        "@neondatabase/serverless": "^0.10.4",
        "@radix-ui/react-accordion": "^1.2.4",
        "@radix-ui/react-alert-dialog": "^1.1.7",
        "@radix-ui/react-aspect-ratio": "^1.1.3",
        "@radix-ui/react-avatar": "^1.1.4",
        "@radix-ui/react-checkbox": "^1.1.5",
        "@radix-ui/react-collapsible": "^1.1.4",
        "@radix-ui/react-context-menu": "^2.2.7",
        "@radix-ui/react-dialog": "^1.1.7",
        "@radix-ui/react-dropdown-menu": "^2.1.7",
        "@radix-ui/react-hover-card": "^1.1.7",
        "@radix-ui/react-label": "^2.1.3",
        "@radix-ui/react-menubar": "^1.1.7",
        "@radix-ui/react-navigation-menu": "^1.2.6",
        "@radix-ui/react-popover": "^1.1.7",
        "@radix-ui/react-progress": "^1.1.3",
        "@radix-ui/react-radio-group": "^1.2.4",
        "@radix-ui/react-scroll-area": "^1.2.4",
        "@radix-ui/react-select": "^2.1.7",
        "@radix-ui/react-separator": "^1.1.3",
        "@radix-ui/react-slider": "^1.2.4",
        "@radix-ui/react-slot": "^1.2.0",
        "@radix-ui/react-switch": "^1.1.4",
        "@radix-ui/react-tabs": "^1.1.4",
        "@radix-ui/react-toast": "^1.2.7",
        "@radix-ui/react-toggle": "^1.1.3",
        "@radix-ui/react-toggle-group": "^1.1.3",
        "@radix-ui/react-tooltip": "^1.2.0",
        "@replit/vite-plugin-shadcn-theme-json": "^0.0.4",
        "@sendgrid/mail": "^8.1.5",
        "@stripe/react-stripe-js": "^3.6.0",
        "@stripe/stripe-js": "^7.2.0",
        "@tailwindcss/vite": "^4.1.3",
        "@tanstack/react-query": "^5.60.5",
        "@types/mailparser": "^3.4.5",
        "@types/multer": "^1.4.12",
        "@types/nodemailer": "^6.4.17",
        "@types/pdf-parse": "^1.1.5",
        "@types/uuid": "^10.0.0",
        "axios": "^1.8.4",
        "class-variance-authority": "^0.7.1",
        "clsx": "^2.1.1",
        "cmdk": "^1.1.1",
        "connect-pg-simple": "^10.0.0",
        "date-fns": "^3.6.0",
        "drizzle-orm": "^0.39.1",
        "drizzle-zod": "^0.7.0",
        "embla-carousel-react": "^8.6.0",
        "express": "^4.21.2",
        "express-session": "^1.18.1",
        "framer-motion": "^11.13.1",
        "input-otp": "^1.4.2",
        "interfax": "^0.8.4",
        "lucide-react": "^0.453.0",
        "mailparser": "^3.7.2",
        "memorystore": "^1.6.7",
        "motion": "^12.16.0",
        "multer": "^1.4.5-lts.2",
        "next-themes": "^0.4.6",
        "nodemailer": "^6.10.1",
        "openai": "^4.95.1",
        "passport": "^0.7.0",
        "passport-local": "^1.0.0",
        "pdf-parse": "^1.1.1",
        "phaxio": "^1.0.0",
        "phone": "^3.1.59",
        "react": "^18.3.1",
        "react-day-picker": "^8.10.1",
        "react-dom": "^18.3.1",
        "react-hook-form": "^7.55.0",
        "react-icons": "^5.4.0",
        "react-resizable-panels": "^2.1.7",
        "recharts": "^2.15.2",
        "stripe": "^18.0.0",
        "tailwind-merge": "^2.6.0",
        "tailwindcss-animate": "^1.0.7",
        "tw-animate-css": "^1.2.5",
        "uuid": "^11.1.0",
        "vaul": "^1.1.2",
        "wouter": "^3.3.5",
        "ws": "^8.18.0",
        "zod": "^3.24.2",
        "zod-validation-error": "^3.4.0"
      },
      "devDependencies": {
        "@replit/vite-plugin-cartographer": "^0.0.11",
        "@replit/vite-plugin-runtime-error-modal": "^0.0.3",
        "@tailwindcss/typography": "^0.5.15",
        "@types/connect-pg-simple": "^7.0.3",
        "@types/express": "4.17.21",
        "@types/express-session": "^1.18.0",
        "@types/node": "20.16.11",
        "@types/passport": "^1.0.16",
        "@types/passport-local": "^1.0.38",
        "@types/react": "^18.3.11",
        "@types/react-dom": "^18.3.1",
        "@types/ws": "^8.5.13",
        "@vitejs/plugin-react": "^4.3.2",
        "autoprefixer": "^10.4.20",
        "drizzle-kit": "^0.30.4",
        "esbuild": "^0.25.0",
        "postcss": "^8.4.47",
        "tailwindcss": "^3.4.17",
        "tsx": "^4.19.1",
        "typescript": "5.6.3",
        "vite": "^5.4.14"
      },
      "optionalDependencies": {
        "bufferutil": "^4.0.8"
      }
    },
  "architecture": {
    "frontend": {
      "framework": "React.js with TypeScript",
      "styling": "Tailwind CSS with shadcn/ui components",
      "routing": "wouter",
      "state_management": "@tanstack/react-query",
      "forms": "react-hook-form with zod validation"
    },
    "backend": {
      "runtime": "Node.js with Express",
      "language": "TypeScript",
      "database": "PostgreSQL with Drizzle ORM",
      "session_management": "express-session with connect-pg-simple"
    },
    "integrations": {
      "spruce_health_api": {
        "purpose": "Patient communication and messaging",
        "endpoints": [
          "/api/spruce/conversations",
          "/api/spruce/patients/{id}/messages",
          "/api/spruce/send-message"
        ]
      },
      "ai_providers": {
        "anthropic": "claude-sonnet-4-20250514",
        "openai": "gpt-4o",
        "xai": "grok-2-1212 and grok-2-vision-1212"
      },
      "email": "Gmail SMTP with nodemailer",
      "fax": "Optional interfax/phaxio integration"
    }
  },
  "user_requirements": {
    "visual_design": {
      "background": {
        "type": "retro_grid",
        "implementation": "Uniform retro grid background pattern throughout entire application",
        "consistency": "NO mixed backgrounds - all pages must use RetroGrid component",
        "opacity": "0.1 for subtle effect"
      },
      "color_scheme": {
        "theme": "muted navigation menu style",
        "bright_colors": "COMPLETELY REMOVED",
        "text_colors": {
          "primary": "text-foreground",
          "secondary": "text-muted-foreground",
          "tertiary": "text-muted-foreground/80"
        },
        "icon_colors": "text-muted-foreground (no blue, green, red, yellow, purple)"
      },
      "components": {
        "glowing_box": {
          "background": "bg-card/50 backdrop-blur",
          "border": "border border-border/30",
          "hover": "hover:bg-muted/50",
          "opacity": "Low opacity for subtle appearance"
        },
        "rainbow_button": {
          "style": "Muted button design matching navigation",
          "background": "bg-muted hover:bg-muted/80",
          "text": "text-foreground",
          "border": "border border-border/50",
          "animation": "REMOVED - no rainbow effects"
        },
        "conversation_cards": {
          "background": "bg-card/20 (very low opacity)",
          "border": "border-border/20 (very subtle)",
          "hover": "hover:bg-muted/30",
          "text_colors": {
            "name": "text-foreground",
            "message": "text-muted-foreground",
            "timestamp": "text-muted-foreground/70"
          }
        }
      }
    },
    "layout_requirements": {
      "hero_section": "COMPLETELY REMOVED from homepage",
      "user_profile": "COMPLETELY REMOVED from sidebar (no avatar/initials)",
      "sidebar": {
        "content": [
          "InstantHPI branding",
          "Centre MÃ©dical Font subtitle",
          "Navigation menu only"
        ]
      }
    },
    "navigation_structure": {
      "main_sections": [
        {
          "title": "Main",
          "items": [
            {"label": "Home", "path": "/", "icon": "Home"},
            {"label": "Inbox", "path": "/inbox", "icon": "MessageSquare", "notifications": 7},
            {"label": "Priority AI", "path": "/priority-tasks", "icon": "BrainCircuit", "notifications": 4}
          ]
        },
        {
          "title": "Patients",
          "items": [
            {"label": "Patients", "path": "/patients", "icon": "Users", "notifications": 12},
            {"label": "Chronic Conditions", "path": "/chronic-conditions", "icon": "Heart"},
            {"label": "Medication Refills", "path": "/medication-refills", "icon": "PillIcon"},
            {"label": "Urgent Care", "path": "/urgent-care", "icon": "AlertCircle"}
          ]
        },
        {
          "title": "Documents",
          "items": [
            {"label": "Documents", "path": "/documents", "icon": "FileText"},
            {"label": "Insurance Paperwork", "path": "/insurance-paperwork", "icon": "FileCheck"}
          ]
        },
        {
          "title": "Tools & AI",
          "items": [
            {"label": "Knowledge Base", "path": "/knowledge-base", "icon": "GraduationCap"},
            {"label": "AI Billing", "path": "/ai-billing", "icon": "DollarSign"},
            {"label": "Claude AI", "path": "/claude-ai", "icon": "Brain"}
          ]
        },
        {
          "title": "Tier 3.5 (The Association)",
          "items": [
            {"label": "Association", "path": "/tier-association", "icon": "UserCog"}
          ]
        },
        {
          "title": "Leadership",
          "items": [
            {"label": "Leadership", "path": "/leadership-association", "icon": "UserCog"}
          ]
        },
        {
          "title": "Settings",
          "items": [
            {"label": "Settings", "path": "/settings", "icon": "Settings"},
            {"label": "Organization Profile", "path": "/organization-profile", "icon": "User"},
            {"label": "Teammates", "path": "/teammates", "icon": "Users"}
          ]
        }
      ]
    }
  },
  "functionality_requirements": {
    "spruce_integration": {
      "conversations": {
        "display": "List all patient conversations with real data",
        "format": "Name/phone number, timestamp, unread count",
        "styling": "Low opacity cards with muted colors"
      },
      "messaging": {
        "view_messages": "Display conversation history",
        "send_messages": "Send replies to patients",
        "real_time": "Live updates via polling"
      }
    },
    "ai_capabilities": {
      "medical_transcription": "Process patient communications",
      "diagnosis_assistance": "AI-powered diagnostic support",
      "workflow_automation": "Intelligent task management"
    },
    "user_management": {
      "authentication": "Passport.js with local strategy",
      "sessions": "PostgreSQL session store",
      "profiles": "Organization and user settings"
    }
  },
  "technical_specifications": {
    "file_structure": {
      "client": {
        "src": {
          "components": {
            "ui": [
              "retro-grid.tsx",
              "glowing-box.tsx", 
              "rainbow-button.tsx (muted style)",
              "shadcn components"
            ],
            "layout": [
              "AppLayoutSpruce.tsx (no user profile)"
            ]
          },
          "pages": [
            "home-page.tsx (no hero section)",
            "inbox-page.tsx (low opacity cards)",
            "patients-page.tsx",
            "documents-page.tsx",
            "settings-page.tsx"
          ],
          "hooks": [
            "use-auth.tsx"
          ]
        }
      },
      "server": {
        "routes.ts": "API endpoints",
        "auth.ts": "Authentication setup", 
        "storage.ts": "Database interface",
        "spruce-integration.ts": "Spruce Health API client"
      },
      "shared": {
        "schema.ts": "Drizzle database schema and types"
      }
    },
    "styling_system": {
      "css_files": {
        "index.css": {
          "color_variables": {
            "--color-1": "0 100% 63%",
            "--color-2": "270 100% 63%", 
            "--color-3": "210 100% 63%",
            "--color-4": "195 100% 63%",
            "--color-5": "90 100% 63%"
          },
          "animations": {
            "grid": "15s linear infinite translateY animation",
            "tilt": "3s infinite linear rotation",
            "rainbow": "REMOVED - no longer used"
          }
        }
      },
      "tailwind_config": {
        "extend": {
          "colors": "shadcn color system",
          "animations": "grid, rainbow (unused), tilt",
          "keyframes": "Custom animation definitions"
        }
      },
      "theme_json": {
        "primary": "Primary color for accent elements",
        "variant": "professional",
        "appearance": "dark",
        "radius": "Border radius value"
      }
    }
  },
  "environment_variables": {
    "required": [
      "DATABASE_URL",
      "ANTHROPIC_API_KEY",
      "OPENAI_API_KEY", 
      "XAI_API_KEY",
      "SPRUCE_ACCESS_ID",
      "SPRUCE_API_KEY",
      "SPRUCE_BEARER_TOKEN",
      "GMAIL_APP_PASSWORD"
    ],
    "optional": [
      "SENDGRID_API_KEY",
      "STRIPE_SECRET_KEY",
      "VITE_STRIPE_PUBLIC_KEY"
    ]
  },
  "deployment": {
    "platform": "Replit",
    "workflow": "npm run dev (Express + Vite)",
    "database": "PostgreSQL with automatic migrations",
    "port": "5000"
  },
  "user_interaction_patterns": {
    "inbox_workflow": {
      "step_1": "View conversation list (200+ conversations)",
      "step_2": "Click conversation to view messages",
      "step_3": "Send replies via text input",
      "step_4": "Real-time updates for new messages"
    },
    "ai_assistance": {
      "transcription": "Process voice/text to medical notes",
      "analysis": "Sentiment and content analysis", 
      "suggestions": "Treatment and diagnosis recommendations"
    }
  },
  "data_integrity": {
    "principle": "Always use authentic data from authorized sources",
    "spruce_api": "Real patient conversations and messages",
    "no_mock_data": "Never use placeholder or synthetic data",
    "error_handling": "Clear error states when API fails"
  },
  "specific_user_preferences": {
    "repeated_requests": [
      {
        "request": "Rainbow button styling",
        "count": "3+",
        "final_solution": "Muted buttons matching navigation style"
      },
      {
        "request": "Uniform retro grid background", 
        "count": "4+",
        "final_solution": "RetroGrid component on all pages"
      },
      {
        "request": "Remove bright colors",
        "count": "6+", 
        "final_solution": "All muted colors, no bright accents"
      },
      {
        "request": "Remove hero section",
        "count": "7+",
        "final_solution": "Completely removed from homepage"
      },
      {
        "request": "Reduce opacity",
        "count": "10+",
        "final_solution": "Very low opacity cards (bg-card/20)"
      },
      {
        "request": "Remove user avatar",
        "count": "11+", 
        "final_solution": "Completely removed from sidebar"
      }
    ]
  },
  "current_state": {
    "implemented": [
      "Spruce Health API integration",
      "Real conversation data display",
      "Muted color scheme throughout",
      "Retro grid background on all pages",
      "Low opacity conversation cards",
      "Removed hero section",
      "Removed user profile section",
      "Authentication system",
      "Database with Drizzle ORM"
    ],
    "working_features": [
      "Conversation list display",
      "Navigation between pages", 
      "Real-time Spruce API data",
      "Responsive design",
      "Session management"
    ],
    "known_issues": [
      "Message content API returns 405/404 errors",
      "Some Spruce endpoints require different authentication"
    ]
  }
}